<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <title>AR Treasure Hunt</title>

    <!--
      FIX 1: Using A-Frame 1.3.0, which is known to be
      very stable with AR.js.
    -->
    <script src="https://aframe.io/releases/1.3.0/aframe.min.js"></script>
    
    <!-- Using the correct 'aframe-ar.js' for pattern markers -->
    <script src="https://cdn.jsdelivr.net/gh/AR-js-org/AR.js@3.4.3/aframe/build/aframe-ar.js"></script>

    <link rel="stylesheet" href="style.css" />
</head>

<!-- body style is in CSS, needed for 100% height -->
<body style="margin: 0; overflow: hidden;">
    <!-- UI elements for instructions and messages -->
    <div id="ui">
        <h2 id="clue">ğŸ” Find the hidden 'Hiro' marker!</h2>
        <h3 id="message">Point your camera at the marker...</h3>
    </div>

    <!-- 
      AR Scene 
      FIX 2: Removed 'embedded'. A-scene will now
      natively manage the full-screen view.
    -->
    <a-scene arjs="sourceType: webcam; debugUIEnabled: false;">

        <!-- Marker that triggers the detection -->
        <a-marker preset="hiro" id="treasureMarker"></a-marker>

        <!-- Treasure Image -->
        <a-image
            id="treasureImage"
            src="https://sketchok.com/images/articles/06-anime/060-dandadan/10/21m.jpg"
            onerror="this.src='https://sketchok.com/images/articles/06-anime/060-dandadan/10/21m.jpg'"
            position="0 0.5 0"
            width="1"
            height="1"
            visible="false"
            animation="property: scale; to: 1.2 1.2 1.2; dir: alternate; loop: true; dur: 700; easing: easeInOutSine;"
        >
        </a-image>

        <!-- 
          FIX 3: Removed the manual <a-entity camera>.
          The 'arjs' component will create and manage its own camera.
          This prevents conflicts.
        -->

    </a-scene>

    <script src="script.js"></script>
</body>
</html>